<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Seatgeek.GitHub.io by CS109JohnCena</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Seatgeek.GitHub.io</h1>
      <h2 class="project-tagline">NBA 3rd party ticket price prediction</h2>
      <a href="https://github.com/CS109JohnCena/Seatgeek" class="btn">View on GitHub</a>
      <a href="https://github.com/CS109JohnCena/Seatgeek/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/CS109JohnCena/Seatgeek/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="team-members" class="anchor" href="#team-members" aria-hidden="true"><span class="octicon octicon-link"></span></a>Team Members:</h3>

<p>Bryan Baek, Walker Evans, Takehiro Matsuzawa</p>

<h3>
<a id="data-sources" class="anchor" href="#data-sources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data Sources:</h3>

<ul>
<li>SeatGeek's API NBA ticket data </li>
<li>ESPN NBA daily team standings data </li>
<li>ESPN NBA attendance data </li>
<li>ESPN NBA top salary </li>
<li>Wikipedia number of professional teams in US cities</li>
</ul>

<p align="center">
<a href="https://www.youtube.com/watch?v=olC77WZ-BV0" target="_blank"> 
<img src="http://img.youtube.com/vi/olC77WZ-BV0/0.jpg" alt="Screencast" width="400" height="300" align="middle" border="10"></a>
</p>

<h3>
<a id="project-overview" class="anchor" href="#project-overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Project Overview:</h3>

<p>The tickets themselves are priced based on unknown demand, so the prices are very volatile. Thus, there is a deadweight loss associated with the trade of ticket prices. We see this happen a lot on third-party ticket website like Stubhub or SeatGeek.</p>

<p>With this project, we attempted to gather and explore the ticket prices posted on Seatgeek.com and their relationship to NBA data. SeatGeek is 3rd party website for tickets - users are able to buy/sell tickets for any sports/concerts.</p>

<p>Thus, we wanted to look at how different factors affect the ticket pricing.</p>

<ul>
<li>What factors affect the ticket price at a given moment?</li>
<li>Using today's information, can we predict the ticket price a week from now?</li>
<li>Using today’s information, can we predict the ticket price more than a week from now?</li>
</ul>

<p>These are the questions we attempted to answer through our data science process, using some familiar algorithms (eg. OLS, ridge, lasso regression, elastic net) in an effort to predict the ticket price change. Due to the limitations of the API, we were forced to predict the "lowest good deal price": lowest ticket price for a seat SeatGeek determines a "good deal". The average metric could be skewed by a very expensive courtside ticket, and the cheapest ticket without factoring in whether or not it’s a good deal could might be skewed downwards by very bad tickets, such as those with no view.</p>

<h3>
<a id="motivation" class="anchor" href="#motivation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Motivation:</h3>

<p>Event tickets are interesting to study among other commodities. First, tickets lose their value after the time of the event has passed. Next, many different factors affect their prices. The demand can be influenced by many different factors such as number of top stars or the team's winning percentage. In addition, one would treat basketball tickets differently on when the games are. If you were no longer able to make the concert/sports game due to an exam, work, or illness, how would you determine at what price to sell? If you’d like to go to a game for a cheap price, when should you buy the ticket? Thus, we found this problem to interesting to study and wanted to dive deep into the process work to study this phenomenon.</p>

<h3>
<a id="data-cleaning" class="anchor" href="#data-cleaning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data Cleaning</h3>

<p>We collected the information above and extensively cleaned the data to merge it into one big data frame based on game IDs. Our final analyses used information from 2 different days that were one week apart.</p>

<h3>
<a id="initial-data-exploration" class="anchor" href="#initial-data-exploration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial Data Exploration</h3>

<p>We were initially very curious to see explore the following visualizations and questions:</p>

<ul>
<li>How does lowest_price_good change over time?</li>
<li>How does the price of tickets change in relative to the Team's NBA Ranking/Winning Percentage?</li>
<li>How do different factors (sports rating, attendance, salary, other ticket info) affect the ticket price?</li>
</ul>

<p>We wanted to see how individual factors might affect the lowest "good deal" ticket price over time. We looked at how factors like holidays such as Christmas and New Years (shown by vertical red lines), weekends (red shaded regions), the away team's rank (red) and winning percentage (green) affect the ticket price (blue). </p>

<p><img src="Seatgeek/Images/graph1.png" alt="alt text" title="Per Team Analysis"></p>

<p>The effect of holidays (i.e. Christmas) and weekend is accented for a high performing team like the Warriors. Also, the effect of star players is shown, for example, in Lakers: people want to see Kobe Bryant, a NBA legend, play before he retires this season. So, the end of the season sees a huge spike in ticket price. Finally, when you look at Portland Trail Blazers, you see that rank and ticket price are highly correlated before Jan 30. Therefore, the ticket prices and <strong>winning percentage</strong> are highly correlated. We applied similar techniques to determine which factors were relevant to the model and which relationship is best appropriate to represent them in the model. </p>

<h3>
<a id="method-and-analysis" class="anchor" href="#method-and-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Method and Analysis</h3>

<h4>
<a id="model-for-next-weeks-price" class="anchor" href="#model-for-next-weeks-price" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model for Next Week's Price</h4>

<p>A week is long enough for a ticket to significantly change in price. We are comparing the data from 11/29/2015 and 12/06/2015. We regress the price in a week on various predictors.</p>

<p>We tested our prediction with 4 different models (OLS, Ridge, Lasso, and Elastic Net) on 3 different combinations of parameters. We ran a cross-validation to determine Lasso with only the relevant parameters produced the highest accuracy. We look at MSEs (Mean Squared Errors) and MADs (Mean Absolute Derivations) between predicted and actual ticket prices to determine the performance of the model.</p>

<p><img src="https://photos-6.dropbox.com/t/2/AAC-CjhPP24QkE35-EvVHlkuHT2vIoeywAjI9uovj2cL8A/12/113402027/png/32x32/3/1449813600/0/2/graph2.png/EOnwxlcYvuoBIAIoAg/WEBohbXfwnu63eOzP5-Ei4xARORsGS7VER6iexUIVOs?size_mode=3&amp;size=1024x768" alt="alt text" title="Next MSE"></p>

<p>The lasso regression with intuitive explanatory variables is the best of these models to predict the price because it has the smallest MSE.</p>

<p><img src="https://photos-3.dropbox.com/t/2/AAAixhpSrFHZ4M9IDtSxnhMuTuC9VqaPtxz7uFiSBFI57g/12/113402027/png/32x32/3/1449813600/0/2/graph3.png/EOnwxlcYvuoBIAIoAg/ofLSNeJyF4928LP745Pa9GLz4uZV7mLTM7UJibrk588?size_mode=3&amp;size=1024x768" alt="alt text" title="Next MAD"></p>

<p>The lasso regression with intuitive explanatory variables is the best of these models to predict the price because it has the smallest MAD.
We then test the Best Predictive Model on the Test Set to Determine Unbiased Prediction Error.</p>

<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">Best Model Accuracy</th>
<th align="center">Baseline Accuracy</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">RMSE</td>
<td align="center">7.31</td>
<td align="center">10.41</td>
</tr>
<tr>
<td align="center">MAD</td>
<td align="center">3.80</td>
<td align="center">3.94</td>
</tr>
</tbody>
</table>

<p>The improvement with our model is shown in the decrease in RMSE.</p>

<h5>
<a id="model-for-todays-price" class="anchor" href="#model-for-todays-price" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model for Today's Price</h5>

<p>Next, we ran a regression on today’s price with the intention of using that for future predictions in a unique way.</p>

<p><img src="https://photos-5.dropbox.com/t/2/AACR9MWPw7Fr-1rx00fnRc47lcyRJtkFA3KMzkp7tqrBhA/12/113402027/png/32x32/3/1449813600/0/2/graph4.png/EOnwxlcYvuoBIAIoAg/hCDaNKA7KIc187OfqDJbvn3fkjEFik5rnWCPxfK3Ccs?size_mode=3&amp;size=1024x768" alt="alt text" title="Today MAD"></p>

<p><img src="https://photos-6.dropbox.com/t/2/AAArzg-1AmigggkMbHt3vS3a8fLeuJ_ci55fjhksoP06pQ/12/113402027/png/32x32/3/1449813600/0/2/graph5.png/EOnwxlcYvuoBIAIoAg/Nf9QCI4h2qIHptOAgwHOD0Fi_wsGRowcIC-cl1T2kp0?size_mode=3&amp;size=1024x768" alt="alt text" title="Next Week MSE"></p>

<p>The Elastic Net and Lasso Regression with intuitive explanatory variables perform best. We decided to use both of them to determine the true prediction accuracy. </p>

<p>We then tested the Best Predictive Model on the Test Set to Determine Unbiased Prediction Error.</p>

<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">Elastic Net Accuracy</th>
<th align="center">Lasso Accuracy</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">RMSE</td>
<td align="center">13.49</td>
<td align="center">13.46</td>
</tr>
<tr>
<td align="center">MAD</td>
<td align="center">7.56</td>
<td align="center">7.56</td>
</tr>
</tbody>
</table>

<h4>
<a id="using-model-of-todays-price-to-predict-future-prices" class="anchor" href="#using-model-of-todays-price-to-predict-future-prices" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using Model of Today’s Price to Predict Future Prices</h4>

<p>Lasso regression with intuitive explanatory variables proved to be best predicting today's ticket price with today's given information. We wanted to take this model one step further. By changing the "Days Away" variable and assuming that all other factors about each game remained constant, we could predict how the ticket price will change if the game is X days away. This allows us to use only one day’s worth of data to make forecasts over any time horizon.</p>

<p>First, we modeled price over number of days away from game day for 15 random games: </p>

<p><img src="https://photos-1.dropbox.com/t/2/AABEVjpCHYCXADztIR4tLVH1XHZH_BDBNMTIAptM5rLV3g/12/113402027/png/32x32/3/1449813600/0/2/graph6.png/EOnwxlcYvuoBIAIoAg/n0LO38YdS8tpe7nTSDRJrio9B4T0VKwgQ1ccwqz1tFY?size_mode=3&amp;size=1024x768" alt="alt text" title="Next Week MAD"></p>

<p>Next, we modeled the price over number of days away from game day for the current worst performing team in the NBA (76ers)'s 15 games: </p>

<p><img src="https://photos-1.dropbox.com/t/2/AACkw5IXfBHT7p37OMQLfNrsm2dqvz9mRpCimOuMN4MFvg/12/113402027/png/32x32/3/1449813600/0/2/graph7.png/EOnwxlcYvuoBIAIoAg/8zfFVNiMfWwrfbB7Ln_rfVbaDocrT6Bm6dM2sfT3FT4?size_mode=3&amp;size=1024x768" alt="alt text" title="15 random teams"></p>

<p>Next, we modeled the price over number of days away from game day for the current best performing team in the NBA (Warriors)'s 15 games: </p>

<p><img src="https://photos-3.dropbox.com/t/2/AACRWEbqaVFTibFKWl06h7GWdLip4EmyIT9YvbXmTYZRWQ/12/113402027/png/32x32/3/1449813600/0/2/graph8.png/EOnwxlcYvuoBIAIoAg/5XuTo-isBSS2asTAXAvhXMr5LjG7WqP7eaTTMdlvWM0?size_mode=3&amp;size=1024x768" alt="alt text" title="Best Team"></p>

<p>Finally, we compared the use of the model of today’s price for prediction (“LassoTodayModel”) and the model of next week's ticket price (“LassoWeekModel”) against a baseline (“Baseline”) of using today’s price as a forecast. Only the lasso regression for next week's price was slightly better than the baseline model, but using the lasso regression for today’s for prediction is still useful – it can be used to make forecasts over any time horizon. </p>

<p><img src="https://photos-2.dropbox.com/t/2/AADb5nr4snNG_gtNgWvNDMkSQFybuCrYf7zGaZ4DQgLC7w/12/113402027/png/32x32/3/1449813600/0/2/graph9.png/EOnwxlcYvuoBIAIoAg/xOG-4L_UjyWGy4CAMUvZeFwwQI0YB892fohbpnJfzkY?size_mode=3&amp;size=1024x768" alt="alt text" title="Days Away Predictions"></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/CS109JohnCena/Seatgeek">Seatgeek.GitHub.io</a> is maintained by <a href="https://github.com/CS109JohnCena">CS109JohnCena</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
